
# 🛰️ 실내 스마트팜을 위한 자율 드론 관리 시스템

<br>

## 🧩 Executive Summary

본 프로젝트는 **실내 스마트팜 환경에서 자율 드론을 활용한 새로운 관리 방식**을 제안합니다.  
기존 스마트팜은 고도의 자동화를 지향하지만, **실내 환경에서는 GPS 미지원, 구조 복잡성, 인력 부족 등의 제약**이 존재합니다.  
이를 해결하기 위해 **AR 마커 기반 위치 인식**과 **확장 칼만필터(EKF)**, **PD 제어 기법**을 적용한 자율 비행 드론 시스템을 개발하였습니다.

<br><br>

## 🔍 핵심 개념 및 기술

### ✅ 문제점
- 실내 스마트팜은 GPS 수신 불가
- 공간 구조 복잡 → 드론 위치 인식 어려움
- 지속적인 모니터링을 위한 자동화 요구

### 🚀 제안한 솔루션
- **AR(Augmented Reality) 마커 기반 위치 인식**
  - 마커는 스마트팜 각 행의 시작/끝에 배치
  - 드론은 카메라로 마커를 인식하여 실시간 위치 계산
- **Marker Centering**
  - 드론으로부터 AR 마커까지의 거리, 인식된 AR 마커의 크기와 xyz축 값 추출
  - 드론이 AR마커를 정면으로 보도록 좌우, 상하, 전후, yaw축을 조정하며 Centering 구현
- **PD(Proportional-Derivative) 제어**
  - 드론이 x, y, z축 방향으로 정밀하게 마커 중심으로 이동
  - 오버슈팅 최소화
- **확장 칼만필터(EKF) 적용**
  - 마커가 감지되지 않을 때 센서 기반 예측으로 위치 추정
  - 안정적인 궤적 유지 가능
- **마커 탐색 루틴**
  - 일정 시간 마커 미탐지 시 자동 회전하여 재탐색

<br><br>

## 📊 시스템 동작 흐름

![드론 루틴 흐름도](assets/drone_flow_chart.png)

1. **Take off**: 드론 이륙
2. **ArUco Marker 인식**: 카메라로 마커 탐색
3. **Marker 값 추출**: 거리 및 좌표(x, y, z) 계산
4. **Marker Centering**: PD 제어를 통한 위치 정렬
5. **Land**: 착륙 (필요 작업 완료 후)

※ 인식 실패 시 회전하며 마커 탐색 루틴 반복

<br><br>

## 🌱 기대 효과

- 인력 개입 최소화 → **운영 자동화**
- 드론 기반 실시간 모니터링 → **병충해, 성장 상태, 환경 감지**
- 실내 스마트팜 운영 효율 향상 및 **생산성 극대화**

<br><br>

## 🛠️ 사용 기술

- **OpenCV**: 영상 처리 및 ArUco 마커 인식
- **Kalman Filter / EKF**: 실내 위치 추정
- **PD Controller**: 안정적 위치 제어
- **Python, Drone SDK** 등

<br><br>

## 📌 결론

이 시스템은 실내 스마트팜 운영에 있어 드론의 실용성을 극대화하고,  
**지속적인 감시와 작업 자동화를 통해 농업의 미래 방향성을 제시**합니다.
